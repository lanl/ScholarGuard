var RLuriPatternsToExclude=["https?://dx.doi.org*","https?://doi.org*"],RLhasHTTPRegexp=/^https?:/,RLhasColonRegexp=/:/;function RLIsURL(a){return Boolean(a)&&(RLhasHTTPRegexp.test(a)||!RLhasColonRegexp.test(a))}var RLWebArchiveBaseUriToExclude=["https?://webarchive.nationalarchives.gov.uk/*","https?://web.archive.org/*"],RLSchemaOrgAttributes={datePublished:"Get near page creation date ",dateModified:"Get near page modified date "};
Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=this.length;b--;)if(this[b]===a)return b;return-1});var RL_ID=function(){return"RL_"+Math.random().toString(36).substr(2,9)};function RL_appendHiddenLink(a,b,c){var f=document.createElement("li"),d=document.createElement("div"),e=document.createElement("a");e.setAttribute("class","robustLinks RLItem");e.href=c;e.innerHTML=b;d.appendChild(e);f.appendChild(d);a.appendChild(f)}function RLAddZero(a){10>a&&(a="0"+a);return a}
function RLFormatDate(a){var b=new Date(a);if(isNaN(b)&&(b=new Date(a.replace(/ /g,"T")),isNaN(b)))return"Invalid date";a=""+b.getUTCFullYear();a+=RLAddZero(b.getUTCMonth()+1);a+=RLAddZero(b.getUTCDate());a+=RLAddZero(b.getUTCHours());a+=RLAddZero(b.getUTCMinutes());return a+=RLAddZero(b.getUTCSeconds())}function RLPrintDate(a){a=RLFormatDate(a);var b=a.substr(0,4)+"-"+a.substr(4,2)+"-"+a.substr(6,2);"000000"!=a.substr(8,6)&&(b+=" "+a.substr(8,2)+":"+a.substr(10,2)+":"+a.substr(12,2));return b}
var RLDomainRegExp=/(?:https?:\/\/)?(?:www\.)?((?:[A-Za-z0-9_\.])+)(?:\/.*)?/i;function RLPrintDomainName(a){return(a=a.match(RLDomainRegExp))&&1<a.length?(a=a[1],15<a.length?a.substr(0,15)+"...":a):"unknown archive"}var RLLastOpen;function RLCloseLastOpen(){RLLastOpen&&(RLLastOpen.setAttribute("aria-hidden","true"),RLLastOpen=null)}function RLGetAttribute(a,b){try{return a.getAttribute(b).trim()}catch(c){return""}}
document.addEventListener("DOMContentLoaded",function(){for(var a=document.getElementsByTagName("meta"),b={},c=0;c<a.length;c++){var f=RLGetAttribute(a[c],"itemprop");if(f in RLSchemaOrgAttributes){var d=RLGetAttribute(a[c],"content");b[f]={linkstr:"",printstr:""};b[f].linkstr=RLFormatDate(d);b[f].printstr=RLPrintDate(d)}}a=document.getElementsByTagName("a");for(c=0;c<a.length;c++){var e=RLGetAttribute(a[c],"href");0==!e.search("http")&&(d=window.location,d=d.protocol+"//"+d.host,0==!e.search("/|../|./")&&
            (d+="/"),e=d+e);var d=RLGetAttribute(a[c],"data-originalurl"),l=Boolean(d);l||(d=e);var m=RLGetAttribute(a[c],"data-versionurl"),q=Boolean(m);!q&&l&&(m=e);var r=RLGetAttribute(a[c],"data-versiondate"),t=Boolean(r),n=new RegExp("(?:"+RLuriPatternsToExclude.concat(RLWebArchiveBaseUriToExclude).join(")|(?:")+")");if(0<a[c].href.length&&0>(" "+a[c].className+" ").indexOf(" robustLinks ")&&(0<Object.keys(b).length||l||q||t)&&!n.test(e)&&RLIsURL(e)){var g=RL_ID(),e=document.createElement("span");e.setAttribute("role",
                "navigation");e.setAttribute("aria-label","RLElement");var n=document.createElement("ul"),p=document.createElement("li");p.setAttribute("aria-label","RLOuter");var k=document.createElement("a");k.href="";k.setAttribute("aria-haspopup","true");k.setAttribute("class","robustLinks dropDownButton RLArrow");k.setAttribute("aria-controls",g);var u=document.createElement("div");u.setAttribute("class","robustLinks dropDownButton RLIcon");var h=document.createElement("ul");h.setAttribute("class","RLMenu");
            h.id=g;h.setAttribute("aria-hidden","true");g=document.createElement("li");g.setAttribute("class","RLTitle");g.innerHTML="Robust Links";h.appendChild(g);for(f in b)g="http://timetravel.mementoweb.org/memento/"+b[f].linkstr+"/"+d,RL_appendHiddenLink(h,RLSchemaOrgAttributes[f]+b[f].printstr,g);t&&(g="http://timetravel.mementoweb.org/memento/"+RLFormatDate(r)+"/"+d,RL_appendHiddenLink(h,"Get near link date "+RLPrintDate(r),g));(q||l)&&RL_appendHiddenLink(h,"Get from "+RLPrintDomainName(m),m);l&&RL_appendHiddenLink(h,
                    "Get at current date",d);p.appendChild(k);p.appendChild(h);n.appendChild(p);e.appendChild(n);k.parentNode.insertBefore(u,k);k.onclick=function(a){var b=document.getElementById(this.getAttribute("aria-controls")),c="true"==b.getAttribute("aria-hidden");RLCloseLastOpen();c?(b.setAttribute("aria-hidden","false"),RLLastOpen=b):(b.setAttribute("aria-hidden","true"),RLLastOpen=null);a.stopPropagation();return!1};a[c].parentNode.insertBefore(e,a[c].nextSibling)}}document.onclick=RLCloseLastOpen},!1);
